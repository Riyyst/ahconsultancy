/* responsive.css — additive, non-destructive tweaks for mobile responsiveness and a11y */

/* 0) Media defaults */
img, svg, video, canvas { max-width: 100%; height: auto; }
iframe { max-width: 100%; border: 0; }
:where(.wrap){ width: 100%; }
:root{ --safe-top: env(safe-area-inset-top); --safe-bottom: env(safe-area-inset-bottom); }

/* 1) Tap target sizing + focus visibility */
:where(a, button, .btn, .cta, [role="button"]) {
  min-height: 44px;
  min-width: 44px;
}
:where(a, button, .btn, .cta, input, textarea):focus-visible {
  outline: 3px solid rgba(191,161,57,.9);
  outline-offset: 2px;
  box-shadow: none;
}

/* 2) Prevent sticky header overlap for in-page anchors */
html { scroll-padding-top: max(84px, var(--safe-top)); }
#services { scroll-margin-top: 120px; } /* preserve behavior already used */

/* 3) Forms: prevent zoom on iOS */
.form input, .form textarea, input, textarea { font-size: 16px; line-height: 1.4; }

/* 4) Tables & wide blocks: allow horizontal scroll within container only */
:where(.table, table, .code, pre) { max-width: 100%; overflow-x: auto; display: block; }

/* 5) Grids: ensure single-column on narrow screens if not already covered */
@media (max-width: 640px){
  .grid:not(.force-cols) { grid-template-columns: 1fr !important; }
  .portfolio-grid { grid-template-columns: 1fr !important; }
  .top-inner { flex-wrap: wrap; gap: 8px; }
}

/* 6) Safe areas for sticky bars */
.promo { padding-top: max(8px, var(--safe-top)); }
footer { padding-bottom: max(16px, var(--safe-bottom)); }

/* 7) Nav link spacing for easier touch */
.nav a, .top a { padding-block: 8px; }

/* === Added: Content-side padding for readability (excludes header/nav/footer) === */
@media (max-width: 1024px){
  main.wrap { 
    padding-left: clamp(14px, 4vw, 28px);
    padding-right: clamp(14px, 4vw, 28px);
    box-sizing: border-box;
  }
}

/* === Added: Review cards – keep aspect and spacing on small screens === */
@media (max-width: 720px){
  .reviews .rev-viewport{ padding-left: 16px; padding-right: 16px; }
  .reviews .rev-track{ gap: 16px; }
  .reviews .rev{ 
    flex: 0 0 92%;
    max-width: 92%;
  }
  .reviews .rev-ctrl{ 
    width: 40px; height: 40px; font-size: 20px;
  }
}

/* Micro-tweak for ultra-narrow devices */
@media (max-width: 380px){
  .reviews .rev{ flex-basis: 96%; max-width: 96%; }
  main.wrap { padding-left: 12px; padding-right: 12px; }
}


/* === Mobile nav alignment (right-align on small screens) === */
@media (max-width: 720px){
  .top-inner{
    display:flex;
    align-items:center;
    justify-content:space-between;
    flex-wrap:wrap;
    gap: 8px;
  }
  .brand{ flex:1 1 auto; }
  .nav{
    flex:1 1 auto;
    display:flex;
    justify-content:flex-end;
    gap:12px;
    text-align:right;
  }
  .nav a{ display:inline-block; }
}


/* === Centre review cards on mobile === */
@media (max-width: 720px){
  .reviews .rev-track { justify-content: center; }
  .reviews .rev { margin-left:auto; margin-right:auto; }
}


/* === Mobile: centre review cards & track === */
@media (max-width: 720px){
  .reviews .rev-viewport{
    padding-left: 16px;
    padding-right: 16px;
  }
  /* shrink-to-fit and centre the track within the viewport */
  .reviews .rev-track{
    width: max-content;
    margin-left: auto;
    margin-right: auto;
    justify-content: center;
  }
  /* centre each card */
  .reviews .rev{
    margin-left: auto;
    margin-right: auto;
    flex-basis: 92%;
    max-width: 92%;
  }
  /* keep arrows visually centred relative to viewport */
  .reviews .rev-ctrl{
    top: 50%;
  }
}

/* Ultra-narrow tweak */
@media (max-width: 380px){
  .reviews .rev{ flex-basis: 96%; max-width: 96%; }
}


/* === Final mobile fix: one centred review card per view === */
@media (max-width: 768px){
  .reviews .rev-viewport{
    overflow: hidden;
    padding-left: 12px;
    padding-right: 12px;
  }
  .reviews .rev-track{
    display: flex !important;
    justify-content: center !important;
    align-items: stretch !important;
    width: 100% !important;
    margin: 0 auto !important;
    gap: 0 !important;
  }
  .reviews .rev{
    flex: 0 0 100% !important;
    max-width: 100% !important;
    margin: 0 auto !important;
  }
  .reviews .rev-ctrl{
    top: 50% !important;
  }
}


/* === Refined mobile review centring: one full card only === */
@media (max-width: 768px){
  .reviews .rev-viewport{
    overflow: hidden;
    display: flex;
    justify-content: center;
  }
  .reviews .rev-track{
    display: flex !important;
    justify-content: center !important;
    align-items: stretch !important;
    width: 100% !important;
    margin: 0 auto !important;
    transition: none !important;
  }
  .reviews .rev{
    flex: 0 0 100% !important;
    max-width: 100% !important;
    margin: 0 auto !important;
  }
  .reviews .rev-ctrl{
    top: 50% !important;
  }
}

/* === Authoritative mobile carousel rules (no CSS transform on track) === */
@media (max-width: 768px){
  .reviews .rev-viewport{ overflow:hidden; padding: 0 12px; }
  .reviews .rev-track{
    display:flex; width:auto; margin:0;
    gap:24px; justify-content:flex-start; align-items:stretch;
    transition: transform .5s ease;
  }
  .reviews .rev{ flex:0 0 100%; max-width:100%; margin:0; }
  .reviews .rev-ctrl{ top:50%; transform:translateY(-50%); }
}
